import React, { useEffect, useRef } from 'react';
import T1 from '../../assets/Waves/Waves1front/T1'

export default function Waves() {
    const mainSVGRef = useRef(null);
    const svgContainerRef = useRef(null);

    useEffect(() => {
        const mainSVG = mainSVGRef.current;
        const svgContainer = svgContainerRef.current;

        if (!mainSVG || !svgContainer) return;

        const mainPaths = mainSVG.querySelectorAll('path');
        const totalPaths = mainPaths.length;
        const totalSvgs = svgContainer.childElementCount;
        let keyframes = [];
        let animations = [];
        let allPaths = [];
        let thisSvgThisPath;

        for (let svgCount = 1; svgCount <= totalSvgs; svgCount++) {
            let paths = svgContainer.querySelector(`svg:nth-child(${svgCount})`).querySelectorAll('path');
            let pathList = [];
            paths.forEach(path => {
                pathList.push(path);
            });
            allPaths.push(pathList);
        }

        const animatePaths = () => {
            for (let pathCount = 0; pathCount < totalPaths; pathCount++) {
                keyframes = [];
                for (let svgCount = 0; svgCount < totalSvgs; svgCount++) {
                    thisSvgThisPath = allPaths[svgCount][pathCount];
                    let localOffset = (1 / (totalSvgs - 1)) * svgCount;
                    console.log(localOffset);
                    keyframes.push({ d: 'path("' + thisSvgThisPath.getAttribute('d') + '")', offset: localOffset });
                }

                animations.push(mainPaths[pathCount].animate(keyframes, {
                    duration: 2200 * totalSvgs,
                    iterations: Infinity,
                    direction: "alternate",
                    easing: "ease-in-out"
                }));
            }
        };

        animatePaths();
    }, []);

    return (
        <div>
            <svg id="displayImage" ref={mainSVGRef} className='min-w-full max-w-fit h-full' viewBox="0 0 900 600" width="900" height="600" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" version="1.1">
            {/* <rect x="0" y="0" width="900" height="600" fill="#001220"></rect> */}
            <path d="M0 320L15 322.5C30 325 60 330 90 329.8C120 329.7 150 324.3 180 323.5C210 322.7 240 326.3 270 328C300 329.7 330 329.3 360 325.3C390 321.3 420 313.7 450 316.2C480 318.7 510 331.3 540 337.3C570 343.3 600 342.7 630 337.3C660 332 690 322 720 321.8C750 321.7 780 331.3 810 331.8C840 332.3 870 323.7 885 319.3L900 315L900 601L885 601C870 601 840 601 810 601C780 601 750 601 720 601C690 601 660 601 630 601C600 601 570 601 540 601C510 601 480 601 450 601C420 601 390 601 360 601C330 601 300 601 270 601C240 601 210 601 180 601C150 601 120 601 90 601C60 601 30 601 15 601L0 601Z" fill="#8a4562"></path><path d="M0 353L15 356.5C30 360 60 367 90 369.3C120 371.7 150 369.3 180 364.7C210 360 240 353 270 350.5C300 348 330 350 360 353.8C390 357.7 420 363.3 450 360C480 356.7 510 344.3 540 342.2C570 340 600 348 630 352.5C660 357 690 358 720 359.8C750 361.7 780 364.3 810 366.3C840 368.3 870 369.7 885 370.3L900 371L900 601L885 601C870 601 840 601 810 601C780 601 750 601 720 601C690 601 660 601 630 601C600 601 570 601 540 601C510 601 480 601 450 601C420 601 390 601 360 601C330 601 300 601 270 601C240 601 210 601 180 601C150 601 120 601 90 601C60 601 30 601 15 601L0 601Z" fill="#7f4162"></path><path d="M0 356L15 361.2C30 366.3 60 376.7 90 381.2C120 385.7 150 384.3 180 379.3C210 374.3 240 365.7 270 365.7C300 365.7 330 374.3 360 377.7C390 381 420 379 450 380.7C480 382.3 510 387.7 540 385.8C570 384 600 375 630 374.5C660 374 690 382 720 381.7C750 381.3 780 372.7 810 372.8C840 373 870 382 885 386.5L900 391L900 601L885 601C870 601 840 601 810 601C780 601 750 601 720 601C690 601 660 601 630 601C600 601 570 601 540 601C510 601 480 601 450 601C420 601 390 601 360 601C330 601 300 601 270 601C240 601 210 601 180 601C150 601 120 601 90 601C60 601 30 601 15 601L0 601Z" fill="#733e61"></path><path d="M0 383L15 385.5C30 388 60 393 90 391.2C120 389.3 150 380.7 180 381C210 381.3 240 390.7 270 396C300 401.3 330 402.7 360 403.5C390 404.3 420 404.7 450 405.3C480 406 510 407 540 402.3C570 397.7 600 387.3 630 384.7C660 382 690 387 720 387.2C750 387.3 780 382.7 810 380.3C840 378 870 378 885 378L900 378L900 601L885 601C870 601 840 601 810 601C780 601 750 601 720 601C690 601 660 601 630 601C600 601 570 601 540 601C510 601 480 601 450 601C420 601 390 601 360 601C330 601 300 601 270 601C240 601 210 601 180 601C150 601 120 601 90 601C60 601 30 601 15 601L0 601Z" fill="#673b60"></path><path d="M0 417L15 415C30 413 60 409 90 410.8C120 412.7 150 420.3 180 420.8C210 421.3 240 414.7 270 415.2C300 415.7 330 423.3 360 426.7C390 430 420 429 450 423.7C480 418.3 510 408.7 540 409C570 409.3 600 419.7 630 420.5C660 421.3 690 412.7 720 410.7C750 408.7 780 413.3 810 412.2C840 411 870 404 885 400.5L900 397L900 601L885 601C870 601 840 601 810 601C780 601 750 601 720 601C690 601 660 601 630 601C600 601 570 601 540 601C510 601 480 601 450 601C420 601 390 601 360 601C330 601 300 601 270 601C240 601 210 601 180 601C150 601 120 601 90 601C60 601 30 601 15 601L0 601Z" fill="#5b375e"></path><path d="M0 428L15 428.5C30 429 60 430 90 429.3C120 428.7 150 426.3 180 428.7C210 431 240 438 270 439.8C300 441.7 330 438.3 360 434C390 429.7 420 424.3 450 426.2C480 428 510 437 540 442C570 447 600 448 630 444.8C660 441.7 690 434.3 720 430C750 425.7 780 424.3 810 427.7C840 431 870 439 885 443L900 447L900 601L885 601C870 601 840 601 810 601C780 601 750 601 720 601C690 601 660 601 630 601C600 601 570 601 540 601C510 601 480 601 450 601C420 601 390 601 360 601C330 601 300 601 270 601C240 601 210 601 180 601C150 601 120 601 90 601C60 601 30 601 15 601L0 601Z" fill="#4f355b"></path><path d="M0 453L15 454C30 455 60 457 90 458C120 459 150 459 180 459.3C210 459.7 240 460.3 270 459.7C300 459 330 457 360 457.3C390 457.7 420 460.3 450 460.5C480 460.7 510 458.3 540 454.5C570 450.7 600 445.3 630 442.8C660 440.3 690 440.7 720 443C750 445.3 780 449.7 810 450.2C840 450.7 870 447.3 885 445.7L900 444L900 601L885 601C870 601 840 601 810 601C780 601 750 601 720 601C690 601 660 601 630 601C600 601 570 601 540 601C510 601 480 601 450 601C420 601 390 601 360 601C330 601 300 601 270 601C240 601 210 601 180 601C150 601 120 601 90 601C60 601 30 601 15 601L0 601Z" fill="#433157"></path><path d="M0 475L15 473.3C30 471.7 60 468.3 90 469.3C120 470.3 150 475.7 180 478.2C210 480.7 240 480.3 270 478.7C300 477 330 474 360 473.7C390 473.3 420 475.7 450 476.7C480 477.7 510 477.3 540 474.7C570 472 600 467 630 465.5C660 464 690 466 720 470C750 474 780 480 810 481.3C840 482.7 870 479.3 885 477.7L900 476L900 601L885 601C870 601 840 601 810 601C780 601 750 601 720 601C690 601 660 601 630 601C600 601 570 601 540 601C510 601 480 601 450 601C420 601 390 601 360 601C330 601 300 601 270 601C240 601 210 601 180 601C150 601 120 601 90 601C60 601 30 601 15 601L0 601Z" fill="#372e53"></path><path d="M0 486L15 488.3C30 490.7 60 495.3 90 498.5C120 501.7 150 503.3 180 501.2C210 499 240 493 270 493C300 493 330 499 360 499.2C390 499.3 420 493.7 450 493.7C480 493.7 510 499.3 540 499.8C570 500.3 600 495.7 630 492.8C660 490 690 489 720 488.3C750 487.7 780 487.3 810 489.3C840 491.3 870 495.7 885 497.8L900 500L900 601L885 601C870 601 840 601 810 601C780 601 750 601 720 601C690 601 660 601 630 601C600 601 570 601 540 601C510 601 480 601 450 601C420 601 390 601 360 601C330 601 300 601 270 601C240 601 210 601 180 601C150 601 120 601 90 601C60 601 30 601 15 601L0 601Z" fill="#2a2b4e"></path><path d="M0 524L15 521.3C30 518.7 60 513.3 90 513.2C120 513 150 518 180 520.7C210 523.3 240 523.7 270 522.7C300 521.7 330 519.3 360 517.8C390 516.3 420 515.7 450 515.2C480 514.7 510 514.3 540 515.2C570 516 600 518 630 518.8C660 519.7 690 519.3 720 519.2C750 519 780 519 810 519.2C840 519.3 870 519.7 885 519.8L900 520L900 601L885 601C870 601 840 601 810 601C780 601 750 601 720 601C690 601 660 601 630 601C600 601 570 601 540 601C510 601 480 601 450 601C420 601 390 601 360 601C330 601 300 601 270 601C240 601 210 601 180 601C150 601 120 601 90 601C60 601 30 601 15 601L0 601Z" fill="#1e2748"></path><path d="M0 538L15 536.8C30 535.7 60 533.3 90 532.7C120 532 150 533 180 533.7C210 534.3 240 534.7 270 535C300 535.3 330 535.7 360 535.2C390 534.7 420 533.3 450 534C480 534.7 510 537.3 540 538.7C570 540 600 540 630 539.3C660 538.7 690 537.3 720 536.2C750 535 780 534 810 534.7C840 535.3 870 537.7 885 538.8L900 540L900 601L885 601C870 601 840 601 810 601C780 601 750 601 720 601C690 601 660 601 630 601C600 601 570 601 540 601C510 601 480 601 450 601C420 601 390 601 360 601C330 601 300 601 270 601C240 601 210 601 180 601C150 601 120 601 90 601C60 601 30 601 15 601L0 601Z" fill="#112442"></path><path d="M0 557L15 557.2C30 557.3 60 557.7 90 557.7C120 557.7 150 557.3 180 557.5C210 557.7 240 558.3 270 559.2C300 560 330 561 360 561.2C390 561.3 420 560.7 450 560.3C480 560 510 560 540 559.3C570 558.7 600 557.3 630 557.7C660 558 690 560 720 560.7C750 561.3 780 560.7 810 559.5C840 558.3 870 556.7 885 555.8L900 555L900 601L885 601C870 601 840 601 810 601C780 601 750 601 720 601C690 601 660 601 630 601C600 601 570 601 540 601C510 601 480 601 450 601C420 601 390 601 360 601C330 601 300 601 270 601C240 601 210 601 180 601C150 601 120 601 90 601C60 601 30 601 15 601L0 601Z" fill="#02203b"></path></svg>

            <div id="svgContainer" ref={svgContainerRef} className='hidden'>
                <T1 />
            </div>
        </div>
    );
};

